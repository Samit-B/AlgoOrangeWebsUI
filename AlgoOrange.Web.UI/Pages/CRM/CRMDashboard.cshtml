@page
<div class="content">
    <div class="row gy-3 mb-4 justify-content-between">
        <div class="col-xxl-6">
            <h2 class="mb-2 text-body-emphasis">CRM Dashboard</h2>
            <h5 class="text-body-tertiary fw-semibold mb-4">Check your business growth in one place</h5>
            <div class="row g-3 mb-3">
                <div class="col-sm-6 col-md-4 col-xl-3 col-xxl-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex d-sm-block justify-content-between">
                                <div class="border-bottom-sm border-translucent mb-sm-4">
                                    <div class="d-flex align-items-center">
                                        <div class="d-flex align-items-center icon-wrapper-sm shadow-primary-100" style="transform: rotate(-7.45deg);"><span class="fa-solid fa-phone-alt text-primary fs-7 z-1 ms-2"></span></div>
                                        <p class="text-body-tertiary fs-9 mb-0 ms-2 mt-3">Outgoing call</p>
                                    </div>
                                    <p class="text-primary mt-2 fs-6 fw-bold mb-0 mb-sm-4">3 <span class="fs-8 text-body lh-lg">Leads Today</span></p>
                                </div>
                                <div class="d-flex flex-column justify-content-center flex-between-end d-sm-block text-end text-sm-start">
                                    <span class="badge badge-phoenix badge-phoenix-success fs-10 mb-2">+24.5%</span>
                                    <p class="mb-0 fs-9 text-body-tertiary">Than Yesterday</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4 col-xl-3 col-xxl-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex d-sm-block justify-content-between">
                                <div class="border-bottom-sm border-translucent mb-sm-4">
                                    <div class="d-flex align-items-center">
                                        <div class="d-flex align-items-center icon-wrapper-sm shadow-info-100" style="transform: rotate(-7.45deg);"><span class="fa-solid fa-calendar text-info fs-7 z-1 ms-2"></span></div>
                                        <p class="text-body-tertiary fs-9 mb-0 ms-2 mt-3">Outgoing meeting</p>
                                    </div>
                                    <p class="text-info mt-2 fs-6 fw-bold mb-0 mb-sm-4">12 <span class="fs-8 text-body lh-lg">This Week</span></p>
                                </div>
                                <div class="d-flex flex-column justify-content-center flex-between-end d-sm-block text-end text-sm-start">
                                    <span class="badge badge-phoenix badge-phoenix-warning fs-10 mb-2">+24.5%</span>
                                    <p class="mb-0 fs-9 text-body-tertiary">Than last week</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-xl-6 col-xxl-4 gy-5 gy-md-3">
                    <div class="border-bottom border-translucent">
                        <h5 class="pb-4 border-bottom border-translucent">Top 5 Lead Sources</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item bg-transparent list-group-crm fw-bold text-body fs-9 py-2">
                                <div class="d-flex justify-content-between"><span class="fw-normal fs-9 mx-1"> <span class="fw-bold">1. </span>None </span><span>(65)</span></div>
                            </li>
                            <li class="list-group-item bg-transparent list-group-crm fw-bold text-body fs-9 py-2">
                                <div class="d-flex justify-content-between"><span class="fw-normal mx-1"><span class="fw-bold">2. </span>Online Store</span><span>(74)</span></div>
                            </li>
                            <li class="list-group-item bg-transparent list-group-crm fw-bold text-body fs-9 py-2">
                                <div class="d-flex justify-content-between"><span class="fw-normal fs-9 mx-1"><span class="fw-bold">3.</span> Advertisement</span><span>(32)</span></div>
                            </li>
                            <li class="list-group-item bg-transparent list-group-crm fw-bold text-body fs-9 py-2">
                                <div class="d-flex justify-content-between"><span class="fw-normal fs-9 mx-1"><span class="fw-bold">4.</span> Seminar Partner</span><span>(25)</span></div>
                            </li>
                            <li class="list-group-item bg-transparent list-group-crm fw-bold text-body fs-9 py-2">
                                <div class="d-flex justify-content-between"><span class="fw-normal fs-9 mx-1"> <span class="fw-bold">5.</span> Partner</span><span>(23)</span></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-6 mb-6">
            <h3>Contacts Created
             <button class="btn btn-link p-0 text-body fs-6" type="button" id="crm-contact-button" data-bs-toggle="tooltip" data-bs-placement="top" title="Chatbot for Contacts">
                                            <span class="fa-solid fa-info-circle"></span>
                                        </button></h3>
            <p class="text-body-tertiary mb-1">Payment received across all channels</p>
            <div class="echart-contacts-created" style="min-height:270px; width:100%"></div>
        </div>
        <div class="col-12 col-xxl-6 mb-3 mb-sm-0">
            <div class="row">
                <div class="col-sm-7 col-md-8 col-xxl-8 mb-md-3 mb-lg-0">
                    <h3>New Contacts by Source</h3>
                    <p class="text-body-tertiary">Payment received across all channels</p>
                    <div class="row g-0">
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100 border-1 border-bottom border-end border-translucent">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-primary" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Organic</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">80</h3>
                            </div>
                        </div>
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100 border-1 border-bottom border-end-md-0 border-end-xl border-translucent">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-success" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Paid Search</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">65</h3>
                            </div>
                        </div>
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100 border-1 border-bottom border-end border-end-md border-end-xl-0 border-translucent">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-info" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Direct</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">40</h3>
                            </div>
                        </div>
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100 border-1 border-end-xl border-bottom border-bottom-xl-0 border-translucent">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-info-light" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Social</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">220</h3>
                            </div>
                        </div>
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100 border-1 border-end border-translucent">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-danger-lighter" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Referrals</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">120</h3>
                            </div>
                        </div>
                        <div class="col-6 col-xl-4">
                            <div class="d-flex flex-column flex-center align-items-sm-start flex-md-row justify-content-md-between flex-xxl-column p-3 ps-sm-3 ps-md-4 p-md-3 h-100">
                                <div class="d-flex align-items-center mb-1"><span class="fa-solid fa-square fs-11 me-2 text-warning-light" data-fa-transform="up-2"></span><span class="mb-0 fs-9 text-body">Others</span></div>
                                <h3 class="fw-semibold ms-xl-3 ms-xxl-0 pe-md-2 pe-xxl-0 mb-0 mb-sm-3">35</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-5 col-md-4 col-xxl-4 my-3 my-sm-0">
                    <div class="position-relative d-flex flex-center mb-sm-4 mb-xl-0 echart-contact-by-source-container mt-sm-7 mt-lg-4 mt-xl-0">
                        <div class="echart-contact-by-source" style="min-height:245px;width:100%"></div>
                        <div class="position-absolute rounded-circle bg-primary-subtle top-50 start-50 translate-middle d-flex flex-center" style="height:100px; width:100px;">
                            <h3 class="mb-0 text-primary-dark fw-bolder" data-label="data-label"></h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-xxl-6 mb-8">
            <div class="mb-3">
                <h3>New Users &amp; Leads<button class="btn btn-link p-0 text-body fs-6" type="button" id="crm-users-button" data-bs-toggle="tooltip" data-bs-placement="top" title="Chatbot for new users &amp; leads">
                                            <span class="fa-solid fa-info-circle"></span>
                                        </button></h3>
                <p class="text-body-tertiary mb-0">Payment received across all channels</p>
            </div>
            <div class="row g-6">
                <div class="col-md-6 mb-2 mb-sm-0">
                    <div class="d-flex align-items-center">
                        <span class="me-2 text-info" data-feather="users" style="min-height:24px; width:24px"></span>
                        <h4 class="text-body-tertiary mb-0">New Users :<span class="text-body-emphasis"> 42</span></h4><span class="badge badge-phoenix fs-10 badge-phoenix-success d-inline-flex align-items-center ms-2"><span class="badge-label d-inline-block lh-base">+24.5%</span><span class="ms-1 fa-solid fa-caret-up d-inline-block lh-1"></span></span>
                    </div>
                    <div class="pb-0 pt-4">
                        <div class="echarts-new-users" style="min-height:110px;width:100%;"></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <span class="me-2 text-primary" data-feather="zap" style="height:24px; width:24px"></span>
                        <h4 class="text-body-tertiary mb-0">New Leads :<span class="text-body-emphasis"> 45</span></h4><span class="badge badge-phoenix fs-10 badge-phoenix-success d-inline-flex align-items-center ms-2"><span class="badge-label d-inline-block lh-base">+30.5%</span><span class="ms-1 fa-solid fa-caret-up d-inline-block lh-1"></span></span>
                    </div>
                    <div class="pb-0 pt-4">
                        <div class="echarts-new-leads" style="min-height:110px;width:100%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-xxl-6">
            <div class="row align-items-start justify-content-between mb-4 g-3">
                <div class="col-auto">
                    <h3>Ad Clicks<button class="btn btn-link p-0 text-body fs-6" type="button" id="crm-ad-clicks-button" data-bs-toggle="tooltip" data-bs-placement="top" title="Chatbot for Ad clicks">
                                            <span class="fa-solid fa-info-circle"></span>
                                        </button></h3>
                    <p class="text-body-tertiary lh-sm mb-0">Check effectiveness of your ads</p>
                </div>
                <div class="col-12 col-sm-4">
                    <select class="form-select form-select-sm" id="select-ad-clicks-month">
                        <option>Mar 1 - 31, 2022</option>
                        <option>April 1 - 30, 2022</option>
                        <option>May 1 - 31, 2022</option>
                    </select>
                </div>
            </div>
            <div class="echart-add-clicks-chart" style="min-height:385px;width:100%"></div>
        </div>
        <div class="col-12 col-xxl-6 mb-6 gy-0 gy-xxl-3">
            <div class="row align-items-start justify-content-between mb-4 g-3">
                <div class="col-auto">
                    <h3>Deal Forecast<span class="fw-semibold">- $90,303</span></h3>
                    <p class="text-body-tertiary mb-1">Show what you offer here</p>
                </div>
                <div class="col-12 col-sm-4">
                    <select class="form-select form-select-sm" id="select-ad-forcast-month">
                        <option>Mar 1 - 31, 2022</option>
                        <option>April 1 - 30, 2022</option>
                        <option>May 1 - 31, 2022</option>
                    </select>
                </div>
            </div>
            <div class="w-100">
                <div class="d-flex flex-start">
                    <p class="mb-2 text-body-tertiary fw-semibold fs-9" style="width: 20.72%">$21.0k</p>
                    <p class="mb-2 text-body-tertiary fw-semibold fs-9" style="width: 35.76%">$3.4k</p>
                    <p class="mb-2 text-body-tertiary fw-semibold fs-9" style="width: 25.38%">$15.1k</p>
                    <p class="mb-2 text-body-tertiary fw-semibold fs-9" style="width: 25.14%">$4.6k</p>
                </div>
                <div class="progress mb-3 rounded-3" style="height: 10px;">
                    <div class="progress-bar border-end border-2 bg-primary-dark" role="progressbar" style="width: 20.72%" aria-valuenow="20.72" aria-valuemin="0" aria-valuemax="100" data-bs-toggle="tooltip" data-bs-placement="top" title="Appointment"></div>
                    <div class="progress-bar border-end border-2" role="progressbar" style="width: 35.76%" aria-valuenow="35.76" aria-valuemin="0" aria-valuemax="100" data-bs-toggle="tooltip" data-bs-placement="top" title="Qualified"></div>
                    <div class="progress-bar bg-success border-end border-2" role="progressbar" style="width: 25.38%" aria-valuenow="25.38" aria-valuemin="0" aria-valuemax="100" data-bs-toggle="tooltip" data-bs-placement="top" title="Closed Won"></div>
                    <div class="progress-bar bg-info" role="progressbar" style="width: 25.14%" aria-valuenow="25.14" aria-valuemin="0" aria-valuemax="100" data-bs-toggle="tooltip" data-bs-placement="top" title="Contact Sent"></div>
                </div>
            </div>
            <h4 class="mt-4 mb-3">Deal Forecast by Owner </h4>
            <div class="border-top border-bottom-0" id="dealForecastTable" data-list='{"valueNames":["contact","appointment","qualified","closed-won","contact-sent"],"page":5}'>
                <div class="table-responsive scrollbar">
                    <table class="table fs-9 mb-0">
                        <thead>
                            <tr>
                                <th class="sort border-end border-translucent white-space-nowrap align-middle ps-0 text-uppercase text-body-tertiary" scope="col" data-sort="contact" style="width:15%; min-width:100px">Contact</th>
                                <th class="sort border-end border-translucent align-middle text-end px-3 text-uppercase text-body-tertiary" scope="col" data-sort="appointment" style="width:15%; min-width:95px">
                                    <div class="d-inline-flex flex-center"><span class="fa-solid fa-square fs-11 text-primary me-2" data-fa-transform="up-2"></span><span class="mb-0 fs-9">Appointment</span></div>
                                </th>
                                <th class="sort border-end border-translucent align-middle text-end px-3 text-uppercase text-body-tertiary" scope="col" data-sort="qualified" style="width:20%; min-width:100px">
                                    <div class="d-inline-flex flex-center"><span class="fa-solid fa-square fs-11 text-primary-light me-2" data-fa-transform="up-2"></span><span class="mb-0 fs-9">Qualified</span></div>
                                </th>
                                <th class="sort border-end border-translucent align-middle text-end px-3 text-uppercase text-body-tertiary" scope="col" data-sort="closed-won" style="width:20%; min-width:100px">
                                    <div class="d-inline-flex flex-center"><span class="fa-solid fa-square fs-11 text-success me-2" data-fa-transform="up-2"></span><span class="mb-0 fs-9">Closed Won</span></div>
                                </th>
                                <th class="sort align-middle text-end ps-3 text-uppercase text-body-tertiary" scope="col" data-sort="contact-sent" style="width:20%; min-width:100px">
                                    <div class="d-inline-flex flex-center"><span class="fa-solid fa-square fs-11 text-info me-2" data-fa-transform="up-2"></span><span class="mb-0 fs-9">Contact Sent</span></div>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="list" id="table-deal-forecast-body">
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Carrie Anne</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">1000</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$1256</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$1200</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$1200</td>
                            </tr>
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Milind Mikuja</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">558</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$2531</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$2200</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$2200</td>
                            </tr>
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Stanley Drinkwater</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">1100</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$100</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$100</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$100</td>
                            </tr>
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Josef Stravinsky</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">856</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$326</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$265</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$265</td>
                            </tr>
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Roy Anderson</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">1200</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$1452</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$865</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$865</td>
                            </tr>
                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                <td class="contact border-end border-translucent align-middle white-space-nowrap py-2 ps-0 px-3"><a class="fw-semibold" href="#!">Oscar Wilde</a></td>
                                <td class="appointment border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">1020</td>
                                <td class="qualified border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$950</td>
                                <td class="closed-won border-end border-translucent align-middle white-space-nowrap text-end fw-semibold text-body py-2 px-3">$1000</td>
                                <td class="contact-sent border-end-0 align-middle white-space-nowrap text-end fw-semibold text-body ps-3 py-2">$800</td>
                            </tr>
                        </tbody>
                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                            <td class="align-middle border-bottom-0 border-end border-translucent white-space-nowrap text-end fw-bold text-body-emphasis pt-2 lh-sm pb-0 px-3"> </td>
                            <td class="align-middle border-bottom-0 border-end border-translucent white-space-nowrap text-end fw-bold text-body-emphasis pt-2 lh-sm pb-0 px-3">4,744</td>
                            <td class="align-middle border-bottom-0 border-end border-translucent white-space-nowrap text-end fw-bold text-body-emphasis pt-2 lh-sm pb-0 px-3">$5,665</td>
                            <td class="align-middle border-bottom-0 border-end border-translucent white-space-nowrap text-end fw-bold text-body-emphasis pt-2 lh-sm pb-0 px-3">$4630</td>
                            <td class="border-bottom-0 align-middle white-space-nowrap text-end fw-bold text-body-emphasis pt-2 pb-0 ps-3">$4630</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="mx-lg-n4">
        <div class="row g-3 mb-9 mt-n7">
            <div class="col-xl-5">
                <div class="card h-100">
                    <div class="card-body">
                        <h3>Lead Conversion
                        <button class="btn btn-link p-0 text-body fs-6" type="button" id="crm-lead-button" data-bs-toggle="tooltip" data-bs-placement="top" title="Chatbot for lead">
                                            <span class="fa-solid fa-info-circle"></span>
                                        </button></h3>
                        <p class="text-body-tertiary mb-0">Stages of deals &amp; conversion</p>
                        <div class="echart-lead-conversion" style="min-height: 250px;"></div>
                    </div>
                </div>
            </div>
            <div class="col-xl-7">
                <div class="card h-100">
                    <div class="card-body">
                        <h3>Revenue Target<button class="btn btn-link p-0 text-body fs-6" type="button" id="crm-revenue-button" data-bs-toggle="tooltip" data-bs-placement="top" title="Chatbot for Revenue">
                                            <span class="fa-solid fa-info-circle"></span>
                                        </button></h3>
                        <p class="text-body-tertiary">Country-wise target fulfilment</p>
                        <div class="echart-revenue-target-conversion" style="min-height: 230px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer position-absolute">
        <div class="row g-0 justify-content-between align-items-center h-100">
            <div class="col-12 col-sm-auto text-center">
                <p class="mb-0 mt-2 mt-sm-0 text-body">Thank you for Visiting Algo Orange<span class="d-none d-sm-inline-block"></span><span class="d-none d-sm-inline-block mx-1">|</span><br class="d-sm-none" />2025 &copy;</p>
            </div>
            <div class="col-12 col-sm-auto text-center">
                <p class="mb-0 text-body-tertiary text-opacity-85">v1.22.0</p>
            </div>
        </div>
    </footer>
</div>
<script>
$(document).ready(function(){
    $('<script/>',{type:'text/javascript', src:'/assets/js/dashboards/crm-dashboard.js'}).appendTo('head');
 }); 
</script>

<!-- Floating Chatbox -->
<div id="crm-chat-container" style="
  display: none;
  position: absolute;
  top: 640px;
  left: 620px;
  width: 280px;
  height: 350px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 15px;
  box-shadow: 0px 5px 15px rgba(46, 46, 46, 0.2);
  z-index: 9999;
  flex-direction: column;
  overflow: hidden;
  font-family: sans-serif;
">
  <!-- Header -->
  <div id="crm-chat-header" style="
    background-color: rgb(38, 73, 233);
    color: rgb(201, 247, 243);
    padding: 10px;
    font-weight: bold;
    cursor: move;
  ">
    <img src="~/assets/img/icons/icon.png" alt="phoenix" width="25" />
    <span id="crm-chat-title">Ask Algo</span>
    <span style="float:right; cursor:pointer;" onclick="closeChat()">✖</span>
  </div>

  <!-- Messages -->
  <div id="crm-chat-messages" style="flex: 1; padding: 10px; overflow-y: auto; height: 220px; background-color: #f9f9f9;"></div>

  <!-- Input -->
  <div style="padding: 10px; border-top: 1px solid #ddd;">
    <input type="text" id="crm-chat-input" placeholder="Type a message..." style="width: 75%; padding: 5px; border-radius:10px">
    <button onclick="EcommercechatbotsendMessage()" style="padding: 6px 10px; background:#eccdb3; color: white; border: none; border-radius: 10px;">Send</button>
  </div>
</div>


<script>
  let currentContext = "";

  const contextApiMap = {
  "contact": "http://127.0.0.1:8000/chat/query",
  "users": "http://127.0.0.1:8000/chat/issues",
  "ad-clicks": "http://127.0.0.1:8000/chat/query",
  "lead": "http://127.0.0.1:8000/chat/query",
  "revenue": "http://127.0.0.1:8000/chat/query",
  };

function openChat(event, context) {
  currentContext = context;

  const chat = document.getElementById("crm-chat-container");
  const chatTitle = document.getElementById("crm-chat-title");
  const chatMessages = document.getElementById("crm-chat-messages");

  // Set the chatbot title and welcome message
  chatTitle.textContent = `Ask Algo (${context})`;
  chatMessages.innerHTML = `<div class="welcome-message" style="text-align: center; color: #888;">Welcome to the ${context} chatbot!</div>`;
  

  // Position the chatbox near the button
  const buttonRect = event.target.getBoundingClientRect();
  chat.style.top = `${buttonRect.bottom + window.scrollY + 10}px`;
  chat.style.left = `${buttonRect.left + window.scrollX}px`;

  // Show the chatbox with animation
  chat.style.display = "flex";
  setTimeout(() => {
    chat.classList.add("active");
  }, 10); // Add a slight delay to trigger the animation
}


function closeChat() {
  const chat = document.getElementById("crm-chat-container");

  // Hide the chatbox with animation
  chat.classList.remove("active");
  setTimeout(() => {
    chat.style.display = "none";
  }, 300); // Match the duration of the CSS transition
}

  async function EcommercechatbotsendMessage() {
    const input = document.getElementById("crm-chat-input");
    const msg = input.value.trim();
    if (!msg || !currentContext) return;

    const chatBody = document.getElementById("ecomm-chat-messages");

    // Remove welcome message if it exists
        const welcomeMessage = chatBody.querySelector(".welcome-message");
        if (welcomeMessage) {
        welcomeMessage.remove();
        }

    // Show user message                                           
    const userDiv = document.createElement("div");
    userDiv.style.textAlign = "right";
    userDiv.innerHTML = `<div style="background:#f5f5f5; padding:5px 10px; border-radius:10px; margin:4px 0; display:inline-block;">${msg}</div>`;
    chatBody.appendChild(userDiv);

    input.value = "";

    try {
      const endpoint = contextApiMap[currentContext];
      if (!endpoint) throw new Error("Invalid context");

        const response = await fetch(`${endpoint}?userChatQuery=${encodeURIComponent(msg)}`, {
        method: "GET",
        headers: { "Content-Type": "application/json" },
      });

      const data = await response.json();
      const botReply = data.response || "No response";

      const botDiv = document.createElement("div");
      botDiv.style.textAlign = "left";
      botDiv.innerHTML = `<div style="background:#f9f9f9; padding:5px 10px; border-radius:10px; margin:4px 0; display:inline-block;">${botReply}</div>`;
      chatBody.appendChild(botDiv);
      chatBody.scrollTop = chatBody.scrollHeight;

    } catch (error) {
      console.error("Chat error:", error);
      const errorDiv = document.createElement("div");
      errorDiv.style.textAlign = "left";
      errorDiv.innerHTML = `<div style="color:red; margin:4px 0;">Error: ${error.message}</div>`;
      chatBody.appendChild(errorDiv);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
  }

// Make chat draggable
const chatContainer = document.getElementById("crm-chat-container");
const chatHeader = document.getElementById("crm-chat-header");
let offsetX = 0,
  offsetY = 0,
  isDragging = false;

chatHeader.addEventListener("mousedown", function (e) {
  isDragging = true;

  // Disable transition for instant movement
  chatContainer.classList.add("no-transition");

  offsetX = e.clientX - chatContainer.offsetLeft;
  offsetY = e.clientY - chatContainer.offsetTop;
});

document.addEventListener("mousemove", function (e) {
  if (isDragging) {
    chatContainer.style.left = `${e.clientX - offsetX}px`;
    chatContainer.style.top = `${e.clientY - offsetY}px`;
  }
});

document.addEventListener("mouseup", function () {
  if (isDragging) {
    isDragging = false;

    // Re-enable transition after dragging
    chatContainer.classList.remove("no-transition");
  }
});


  // Button bindings
  document.getElementById("crm-contact-button").addEventListener("click", function (e) {
    openChat(e, "contact");
  });

  document.getElementById("crm-users-button").addEventListener("click", function (e) {
    openChat(e, "users");
  });

  document.getElementById("crm-ad-clicks-button").addEventListener("click", function (e) {
    openChat(e, "ad-clicks");
  });

  document.getElementById("crm-lead-button").addEventListener("click", function (e) {
    openChat(e, "lead");
  });
  document.getElementById("crm-revenue-button").addEventListener("click", function (e) {
    openChat(e, "revenue");
  });
</script>

<script>
    $(document).ready(function(){
        $('<script/>',{type:'text/javascript', src:'/assets/js/dashboards/ecommerce-dashboard.js'}).appendTo('head');
     });
</script>
<style>
  /* Initial state for the popup */
  #crm-chat-container {
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.4s ease-in-out; /* Smooth animation for opacity and scale */
  }

  /* When the popup is active */
  #crm-chat-container.active {
    opacity: 1;
    transform: scale(1);
  }

  /* Disable transition for position changes (instant movement) */
  #crm-chat-container.no-transition {
    transition: none; /* Disable transition for instant movement */
  }

  /* Close button hover effect */
  #crm-chat-header span:hover {
    color: #ff4d4d;
  }
</style>
